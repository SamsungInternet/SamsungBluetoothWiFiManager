(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,function(e,t,c){"use strict";function i(e){const t=new Uint8Array(e),c=String.fromCharCode(...t);return console.log("string",c),c}function n(e){const t=e.length,c=new ArrayBuffer(2*t),i=new Uint16Array(c);for(let c=0;c<t;c++)i[c]=e.charCodeAt(c),console.log({i:c},i[c]);return c}c.d(t,"d",function(){return l}),c.d(t,"b",function(){return O}),c.d(t,"a",function(){return f}),c.d(t,"c",function(){return d}),c.d(t,"f",function(){return h}),c.d(t,"e",function(){return u});const s="00010000-89bd-43c8-9231-40f6e305f96d",o="00010001-89bd-43c8-9231-40f6e305f96d",r="00010002-89bd-43c8-9231-40f6e305f96d",a="00010004-89bd-43c8-9231-40f6e305f96d";let b,j;function l(){return!!navigator.bluetooth&&!!navigator.bluetooth.requestDevice}async function O(){return b=await navigator.bluetooth.requestDevice({filters:[{name:["IoT Gateway WiFi Setup"]}],optionalServices:[s]}),console.log("device",b),b}async function f(){return b?(j=await b.gatt.connect(),console.log("server",j),!0):(console.log("Device not established yet"),null)}async function d(){if(!j)return console.log("Server not established. Try to (re-)connect first."),null;const e=await j.getPrimaryService(s);console.log("service",e);const t=await e.getCharacteristic(a);console.log("characteristic",t);const c=await t.readValue();console.log("Wifi SSIDs value...",c);const n=i(c.buffer).split(" ");return console.log("ssids",n),n}async function h(e){if(console.log("setWifiSSID"),!j)return console.log("Server not established. Try to (re-)connect first."),null;const t=await j.getPrimaryService(s);console.log("service",t);const c=await t.getCharacteristic(o);console.log("characteristic",c);const r=await c.readValue();console.log("BEFORE ssid value:",i(r));const a=n(e),b=await c.writeValue(a);return console.log({response:b}),b}async function u(e){if(console.log("setWifiPassword"),!j)return console.log("Server not established. Try to (re-)connect first."),null;const t=await j.getPrimaryService(s);console.log("service",t);const c=await t.getCharacteristic(r);console.log("characteristic",c);const i=n(e),o=await c.writeValue(i);return console.log({response:o}),o}},function(e,t,c){"use strict";c.r(t);var i=c(0),n=(c(1),c(3));var s={getIsValid(){return console.log("getIsValid: this.refs",this.refs.wifipwd,this.refs.wifissid),!!this.refs.wifissid.value&&!!this.refs.wifipwd.value},onWifiSSIDChange(){console.log("on wifi sssid change: this.refs",this.refs),this.set({isInvalid:!this.getIsValid()})},onWifiPwdChange(){console.log("on wifi pwd change: this.refs",this.refs),this.set({isInvalid:!this.getIsValid()})},async onSubmit(e){console.log("on submit!"),e.preventDefault();const t=await n.f(this.refs.wifissid.value);console.log({ssidResponse:t}),t||this.set({error:!0});const c=await n.e(this.refs.wifipwd.value);console.log({pwdResponse:c})}};function o(e,t){var c,n,s,o,r;return{c(){c=Object(i.m)("h3"),n=Object(i.n)("There was a problem connecting to your Gateway. Please "),s=Object(i.m)("a"),o=Object(i.n)("start again"),r=Object(i.n)("."),this.h()},l(e){c=Object(i.j)(e,"H3",{class:!0},!1);var t=Object(i.i)(c);n=Object(i.k)(t,"There was a problem connecting to your Gateway. Please "),s=Object(i.j)(t,"A",{href:!0},!1);var a=Object(i.i)(s);o=Object(i.k)(a,"start again"),a.forEach(i.p),r=Object(i.k)(t,"."),t.forEach(i.p),this.h()},h(){s.href="/",c.className="error"},m(e,t){Object(i.u)(c,e,t),Object(i.d)(n,c),Object(i.d)(s,c),Object(i.d)(o,s),Object(i.d)(r,c)},d(e){e&&Object(i.p)(c)}}}function r(e,t){var c,n,s,o=t.wifiSSID;return{c(){c=Object(i.m)("option"),n=Object(i.n)(o),this.h()},l(e){c=Object(i.j)(e,"OPTION",{value:!0},!1);var t=Object(i.i)(c);n=Object(i.k)(t,o),t.forEach(i.p),this.h()},h(){c.__value=s=t.wifiSSID,c.value=c.__value},m(e,t){Object(i.u)(c,e,t),Object(i.d)(n,c)},p(e,t){e.$wifiSSIDs&&o!==(o=t.wifiSSID)&&(n.data=o),e.$wifiSSIDs&&s!==(s=t.wifiSSID)&&(c.__value=s),c.value=c.__value},d(e){e&&Object(i.p)(c)}}}function a(e,t,c){const i=Object.create(e);return i.wifiSSID=t[c],i.each_value=t,i.wifiSSID_index=c,i}function b(e){if(Object(i.t)(this,e),this.refs={},this._state=Object(i.e)(Object(i.e)(this.store._init(["wifiSSIDs"]),{isInvalid:!0,error:!1}),e.data),this.store._add(this,["wifiSSIDs"]),this._intro=!0,this._handlers.destroy=[i.y],document.getElementById("svelte-15q61ds-style")||function(){var e=Object(i.m)("style");e.id="svelte-15q61ds-style",e.textContent="#wifi-ssid.svelte-15q61ds{width:100%}#submit.svelte-15q61ds{width:100%}",Object(i.d)(e,document.head)}(),this._fragment=function(e,t){for(var c,n,s,b,j,l,O,f,d,h,u,p,g,w,v,m,S,I,y,E,_,k,D,P,T,W,C,F,A,N,q,V,B,G=t.error&&o(),L=t.$wifiSSIDs,R=[],$=0;$<L.length;$+=1)R[$]=r(0,a(t,L,$));function z(t){e.onWifiSSIDChange()}function U(t){e.onWifiPwdChange()}function x(t){e.onWifiPwdChange()}function H(t){e.onSubmit(t)}return{c(){c=Object(i.n)("\n\n\n\n"),n=Object(i.m)("h1"),s=Object(i.m)("a"),b=Object(i.n)("Setup "),j=Object(i.m)("strong"),l=Object(i.n)("Things"),O=Object(i.n)(" "),f=Object(i.m)("img"),d=Object(i.n)("\n\n"),h=Object(i.m)("h2"),u=Object(i.n)("Step 2"),p=Object(i.n)("\n\n"),G&&G.c(),g=Object(i.n)("\n\n"),w=Object(i.m)("p"),v=Object(i.n)("Your Wi-Fi details"),m=Object(i.n)("\n\n"),S=Object(i.m)("form"),I=Object(i.m)("p"),y=Object(i.m)("label"),E=Object(i.n)("Wi-Fi name (SSID)"),_=Object(i.n)("\n\t\t"),k=Object(i.m)("select"),D=Object(i.m)("option"),P=Object(i.n)("Select...");for(var e=0;e<R.length;e+=1)R[e].c();T=Object(i.n)("\n\n\t"),W=Object(i.m)("p"),C=Object(i.m)("label"),F=Object(i.n)("Wi-Fi password"),A=Object(i.n)("\n\t\t"),N=Object(i.m)("input"),q=Object(i.n)("\n\n\t"),V=Object(i.m)("p"),B=Object(i.m)("input"),this.h()},l(e){c=Object(i.k)(e,"\n\n\n\n"),n=Object(i.j)(e,"H1",{},!1);var t=Object(i.i)(n);s=Object(i.j)(t,"A",{href:!0},!1);var o=Object(i.i)(s);b=Object(i.k)(o,"Setup "),j=Object(i.j)(o,"STRONG",{},!1);var r=Object(i.i)(j);l=Object(i.k)(r,"Things"),r.forEach(i.p),O=Object(i.k)(o," "),f=Object(i.j)(o,"IMG",{src:!0,alt:!0,width:!0,height:!0},!1),Object(i.i)(f).forEach(i.p),o.forEach(i.p),t.forEach(i.p),d=Object(i.k)(e,"\n\n"),h=Object(i.j)(e,"H2",{},!1);var a=Object(i.i)(h);u=Object(i.k)(a,"Step 2"),a.forEach(i.p),p=Object(i.k)(e,"\n\n"),G&&G.l(e),g=Object(i.k)(e,"\n\n"),w=Object(i.j)(e,"P",{class:!0},!1);var L=Object(i.i)(w);v=Object(i.k)(L,"Your Wi-Fi details"),L.forEach(i.p),m=Object(i.k)(e,"\n\n"),S=Object(i.j)(e,"FORM",{},!1);var $=Object(i.i)(S);I=Object(i.j)($,"P",{},!1);var z=Object(i.i)(I);y=Object(i.j)(z,"LABEL",{for:!0},!1);var U=Object(i.i)(y);E=Object(i.k)(U,"Wi-Fi name (SSID)"),U.forEach(i.p),_=Object(i.k)(z,"\n\t\t"),k=Object(i.j)(z,"SELECT",{id:!0,class:!0},!1);var x=Object(i.i)(k);D=Object(i.j)(x,"OPTION",{value:!0,selected:!0},!1);var H=Object(i.i)(D);P=Object(i.k)(H,"Select..."),H.forEach(i.p);for(var J=0;J<R.length;J+=1)R[J].l(x);x.forEach(i.p),z.forEach(i.p),T=Object(i.k)($,"\n\n\t"),W=Object(i.j)($,"P",{},!1);var M=Object(i.i)(W);C=Object(i.j)(M,"LABEL",{for:!0},!1);var Y=Object(i.i)(C);F=Object(i.k)(Y,"Wi-Fi password"),Y.forEach(i.p),A=Object(i.k)(M,"\n\t\t"),N=Object(i.j)(M,"INPUT",{type:!0,id:!0},!1),Object(i.i)(N).forEach(i.p),M.forEach(i.p),q=Object(i.k)($,"\n\n\t"),V=Object(i.j)($,"P",{},!1);var K=Object(i.i)(V);B=Object(i.j)(K,"INPUT",{type:!0,id:!0,disabled:!0,value:!0,class:!0},!1),Object(i.i)(B).forEach(i.p),K.forEach(i.p),$.forEach(i.p),this.h()},h(){document.title="Setup Things - Step 2",f.src="logo-light.svg",f.alt="Things logo",f.width="50",f.height="50",s.href="/",w.className="instruction",y.htmlFor="wifi-ssid",D.__value="",D.value=D.__value,D.selected=!0,Object(i.c)(k,"change",z),k.id="wifi-ssid",k.className="svelte-15q61ds",C.htmlFor="wifi-pwd",Object(i.c)(N,"input",U),Object(i.c)(N,"change",x),Object(i.A)(N,"type","password"),N.id="wifi-pwd",Object(i.A)(B,"type","submit"),B.id="submit",B.disabled=t.isInvalid,B.value="Submit",B.className="svelte-15q61ds",Object(i.c)(S,"submit",H)},m(t,o){Object(i.u)(c,t,o),Object(i.u)(n,t,o),Object(i.d)(s,n),Object(i.d)(b,s),Object(i.d)(j,s),Object(i.d)(l,j),Object(i.d)(O,s),Object(i.d)(f,s),Object(i.u)(d,t,o),Object(i.u)(h,t,o),Object(i.d)(u,h),Object(i.u)(p,t,o),G&&G.m(t,o),Object(i.u)(g,t,o),Object(i.u)(w,t,o),Object(i.d)(v,w),Object(i.u)(m,t,o),Object(i.u)(S,t,o),Object(i.d)(I,S),Object(i.d)(y,I),Object(i.d)(E,y),Object(i.d)(_,I),Object(i.d)(k,I),Object(i.d)(D,k),Object(i.d)(P,D);for(var r=0;r<R.length;r+=1)R[r].m(k,null);e.refs.wifissid=k,Object(i.d)(T,S),Object(i.d)(W,S),Object(i.d)(C,W),Object(i.d)(F,C),Object(i.d)(A,W),Object(i.d)(N,W),e.refs.wifipwd=N,Object(i.d)(q,S),Object(i.d)(V,S),Object(i.d)(B,V)},p(e,t){if(t.error?G||((G=o()).c(),G.m(g.parentNode,g)):G&&(G.d(1),G=null),e.$wifiSSIDs){L=t.$wifiSSIDs;for(var c=0;c<L.length;c+=1){const i=a(t,L,c);R[c]?R[c].p(e,i):(R[c]=r(0,i),R[c].c(),R[c].m(k,null))}for(;c<R.length;c+=1)R[c].d(1);R.length=L.length}e.isInvalid&&(B.disabled=t.isInvalid)},d(t){t&&(Object(i.p)(c),Object(i.p)(n),Object(i.p)(d),Object(i.p)(h),Object(i.p)(p)),G&&G.d(t),t&&(Object(i.p)(g),Object(i.p)(w),Object(i.p)(m),Object(i.p)(S)),Object(i.o)(R,t),Object(i.z)(k,"change",z),e.refs.wifissid===k&&(e.refs.wifissid=null),Object(i.z)(N,"input",U),Object(i.z)(N,"change",x),e.refs.wifipwd===N&&(e.refs.wifipwd=null),Object(i.z)(S,"submit",H)}}}(this,this._state),e.target){var t=Object(i.i)(e.target);e.hydrate?this._fragment.l(t):this._fragment.c(),t.forEach(i.p),this._mount(e.target,e.anchor)}}Object(i.e)(b.prototype,i.x),Object(i.e)(b.prototype,s),t.default=b}]]);