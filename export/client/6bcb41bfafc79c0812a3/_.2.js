(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{3:function(t,e,c){"use strict";function n(t){const e=new Uint8Array(t),c=String.fromCharCode(...e);return console.log("string",c),c}function o(t){const e=t.length,c=new ArrayBuffer(2*e),n=new Uint16Array(c);for(let c=0;c<e;c++)n[c]=t.charCodeAt(c),console.log({i:c},n[c]);return c}c.d(e,"d",function(){return O}),c.d(e,"b",function(){return u}),c.d(e,"a",function(){return l}),c.d(e,"c",function(){return h}),c.d(e,"f",function(){return d}),c.d(e,"e",function(){return p});const r="00010000-89bd-43c8-9231-40f6e305f96d",s="00010001-89bd-43c8-9231-40f6e305f96d",i="00010002-89bd-43c8-9231-40f6e305f96d",a="00010004-89bd-43c8-9231-40f6e305f96d";let b,j;function O(){return!!navigator.bluetooth&&!!navigator.bluetooth.requestDevice}async function u(){return b=await navigator.bluetooth.requestDevice({filters:[{name:["IoT Gateway WiFi Setup"]}],optionalServices:[r]}),console.log("device",b),b}async function l(){return b?(j=await b.gatt.connect(),console.log("server",j),!0):(console.log("Device not established yet"),null)}async function h(){if(!j)return console.log("Server not established. Try to (re-)connect first."),null;const t=await j.getPrimaryService(r);console.log("service",t);const e=await t.getCharacteristic(a);console.log("characteristic",e);const c=await e.readValue();console.log("Wifi SSIDs value...",c);const o=n(c.buffer).split(" ");return console.log("ssids",o),o}async function d(t){if(console.log("setWifiSSID"),!j)return console.log("Server not established. Try to (re-)connect first."),null;const e=await j.getPrimaryService(r);console.log("service",e);const c=await e.getCharacteristic(s);console.log("characteristic",c);const i=await c.readValue();console.log("BEFORE ssid value:",n(i));const a=o(t),b=await c.writeValue(a);return console.log({response:b}),b}async function p(t){if(console.log("setWifiPassword"),!j)return console.log("Server not established. Try to (re-)connect first."),null;const e=await j.getPrimaryService(r);console.log("service",e);const c=await e.getCharacteristic(i);console.log("characteristic",c);const n=o(t),s=await c.writeValue(n);return console.log({response:s}),s}},6:function(t,e,c){"use strict";c.r(e);var n=c(0),o=c(1),r=c(3);var s={onClickConnect(){r.b().then(()=>(this.set({connecting:!0}),r.a())).then(()=>r.c()).then(t=>{t?(console.log("Setting wifi SSIDs in Store:",t),this.store.set({wifiSSIDs:t}),this.set({connecting:!1}),Object(o.a)("/wifi")):(console.error("No wifi SSIDs returned",t),this.set({error:!0}))}).catch(t=>{console.error("Bluetooth connection error",t),this.set({error:!0})})}};function i(t,e){var c,o;return{c(){c=Object(n.m)("h3"),o=Object(n.n)("There was a problem connecting to your Gateway. Please try again."),this.h()},l(t){c=Object(n.j)(t,"H3",{class:!0},!1);var e=Object(n.i)(c);o=Object(n.k)(e,"There was a problem connecting to your Gateway. Please try again."),e.forEach(n.p),this.h()},h(){c.className="error"},m(t,e){Object(n.u)(c,t,e),Object(n.d)(o,c)},d(t){t&&Object(n.p)(c)}}}function a(t,e){var c,o;return{c(){c=Object(n.m)("button"),o=Object(n.m)("span"),this.h()},l(t){c=Object(n.j)(t,"BUTTON",{id:!0,disabled:!0,class:!0},!1);var e=Object(n.i)(c);o=Object(n.j)(e,"SPAN",{class:!0},!1),Object(n.i)(o).forEach(n.p),e.forEach(n.p),this.h()},h(){o.className="loadingSpinner",c.id="connect",c.disabled=!0,c.className="svelte-1pcd5xj"},m(t,e){Object(n.u)(c,t,e),Object(n.d)(o,c)},d(t){t&&Object(n.p)(c)}}}function b(t,e){var c,o;function r(e){t.onClickConnect()}return{c(){c=Object(n.m)("button"),o=Object(n.n)("Connect"),this.h()},l(t){c=Object(n.j)(t,"BUTTON",{id:!0,class:!0},!1);var e=Object(n.i)(c);o=Object(n.k)(e,"Connect"),e.forEach(n.p),this.h()},h(){Object(n.c)(c,"click",r),c.id="connect",c.className="svelte-1pcd5xj"},m(t,e){Object(n.u)(c,t,e),Object(n.d)(o,c)},d(t){t&&Object(n.p)(c),Object(n.z)(c,"click",r)}}}function j(t,e){var c,o,r,s,i,a,b,j,O,u,l;return{c(){c=Object(n.m)("h2"),o=Object(n.n)("Sorry"),r=Object(n.n)("\n\n\t"),s=Object(n.m)("p"),i=Object(n.n)("This service requires Web Bluetooth, which your browser does not support."),a=Object(n.n)("\n\t"),b=Object(n.m)("p"),j=Object(n.n)("Please use an alternative setup method or try again in a \n\t\t"),O=Object(n.m)("a"),u=Object(n.n)("supporting browser"),l=Object(n.n)(" (such as Samsung Internet, Chrome or Opera)."),this.h()},l(t){c=Object(n.j)(t,"H2",{},!1);var e=Object(n.i)(c);o=Object(n.k)(e,"Sorry"),e.forEach(n.p),r=Object(n.k)(t,"\n\n\t"),s=Object(n.j)(t,"P",{},!1);var h=Object(n.i)(s);i=Object(n.k)(h,"This service requires Web Bluetooth, which your browser does not support."),h.forEach(n.p),a=Object(n.k)(t,"\n\t"),b=Object(n.j)(t,"P",{},!1);var d=Object(n.i)(b);j=Object(n.k)(d,"Please use an alternative setup method or try again in a \n\t\t"),O=Object(n.j)(d,"A",{href:!0},!1);var p=Object(n.i)(O);u=Object(n.k)(p,"supporting browser"),p.forEach(n.p),l=Object(n.k)(d," (such as Samsung Internet, Chrome or Opera)."),d.forEach(n.p),this.h()},h(){O.href="https://caniuse.com/#feat=web-bluetooth"},m(t,e){Object(n.u)(c,t,e),Object(n.d)(o,c),Object(n.u)(r,t,e),Object(n.u)(s,t,e),Object(n.d)(i,s),Object(n.u)(a,t,e),Object(n.u)(b,t,e),Object(n.d)(j,b),Object(n.d)(O,b),Object(n.d)(u,O),Object(n.d)(l,b)},p:n.v,d(t){t&&(Object(n.p)(c),Object(n.p)(r),Object(n.p)(s),Object(n.p)(a),Object(n.p)(b))}}}function O(t,e){var c,o,r,s,j,O,u,l,h,d,p,f=e.error&&i();function g(t){return t.connecting?a:b}var v=g(e),w=v(t,e);return{c(){f&&f.c(),c=Object(n.n)("\n\n\t"),o=Object(n.m)("h3"),r=Object(n.n)("To setup your Gateway and configure it to use your wi-fi network, follow these steps."),s=Object(n.n)("\n\n\t"),j=Object(n.m)("h2"),O=Object(n.n)("Step 1"),u=Object(n.n)("\n\n\t"),l=Object(n.m)("p"),h=Object(n.n)("Check your gateway is switched on and press the button to connect."),d=Object(n.n)("\n\n\t"),w.c(),p=Object(n.l)()},l(t){f&&f.l(t),c=Object(n.k)(t,"\n\n\t"),o=Object(n.j)(t,"H3",{},!1);var e=Object(n.i)(o);r=Object(n.k)(e,"To setup your Gateway and configure it to use your wi-fi network, follow these steps."),e.forEach(n.p),s=Object(n.k)(t,"\n\n\t"),j=Object(n.j)(t,"H2",{},!1);var i=Object(n.i)(j);O=Object(n.k)(i,"Step 1"),i.forEach(n.p),u=Object(n.k)(t,"\n\n\t"),l=Object(n.j)(t,"P",{},!1);var a=Object(n.i)(l);h=Object(n.k)(a,"Check your gateway is switched on and press the button to connect."),a.forEach(n.p),d=Object(n.k)(t,"\n\n\t"),w.l(t),p=Object(n.l)()},m(t,e){f&&f.m(t,e),Object(n.u)(c,t,e),Object(n.u)(o,t,e),Object(n.d)(r,o),Object(n.u)(s,t,e),Object(n.u)(j,t,e),Object(n.d)(O,j),Object(n.u)(u,t,e),Object(n.u)(l,t,e),Object(n.d)(h,l),Object(n.u)(d,t,e),w.m(t,e),Object(n.u)(p,t,e)},p(e,n){n.error?f||((f=i()).c(),f.m(c.parentNode,c)):f&&(f.d(1),f=null),v!==(v=g(n))&&(w.d(1),(w=v(t,n)).c(),w.m(p.parentNode,p))},d(t){f&&f.d(t),t&&(Object(n.p)(c),Object(n.p)(o),Object(n.p)(s),Object(n.p)(j),Object(n.p)(u),Object(n.p)(l),Object(n.p)(d)),w.d(t),t&&Object(n.p)(p)}}}function u(t){var e;if(Object(n.t)(this,t),this._state=Object(n.e)({supported:null,error:!1,connecting:!1},t.data),this._intro=!0,document.getElementById("svelte-1pcd5xj-style")||((e=Object(n.m)("style")).id="svelte-1pcd5xj-style",e.textContent="#connect.svelte-1pcd5xj{width:100%}",Object(n.d)(e,document.head)),t.root||(this._oncreate=[]),this._fragment=function(t,e){var c,o,r,s,i,a,b,u,l;function h(t){return 0==t.supported?j:t.supported?O:null}var d=h(e),p=d&&d(t,e);return{c(){c=Object(n.n)("\n\n\n\n"),o=Object(n.m)("h1"),r=Object(n.n)("Setup "),s=Object(n.m)("strong"),i=Object(n.n)("Things"),a=Object(n.n)(" "),b=Object(n.m)("img"),u=Object(n.n)("\n\n"),p&&p.c(),l=Object(n.l)(),this.h()},l(t){c=Object(n.k)(t,"\n\n\n\n"),o=Object(n.j)(t,"H1",{},!1);var e=Object(n.i)(o);r=Object(n.k)(e,"Setup "),s=Object(n.j)(e,"STRONG",{},!1);var j=Object(n.i)(s);i=Object(n.k)(j,"Things"),j.forEach(n.p),a=Object(n.k)(e," "),b=Object(n.j)(e,"IMG",{src:!0,alt:!0,width:!0,height:!0},!1),Object(n.i)(b).forEach(n.p),e.forEach(n.p),u=Object(n.k)(t,"\n\n"),p&&p.l(t),l=Object(n.l)(),this.h()},h(){document.title="Setup Things - Step 1",b.src="logo-light.svg",b.alt="Things logo",b.width="50",b.height="50"},m(t,e){Object(n.u)(c,t,e),Object(n.u)(o,t,e),Object(n.d)(r,o),Object(n.d)(s,o),Object(n.d)(i,s),Object(n.d)(a,o),Object(n.d)(b,o),Object(n.u)(u,t,e),p&&p.m(t,e),Object(n.u)(l,t,e)},p(e,c){d===(d=h(c))&&p?p.p(e,c):(p&&p.d(1),(p=d&&d(t,c))&&p.c(),p&&p.m(l.parentNode,l))},d(t){t&&(Object(n.p)(c),Object(n.p)(o),Object(n.p)(u)),p&&p.d(t),t&&Object(n.p)(l)}}}(this,this._state),this.root._oncreate.push(()=>{(function(){this.set({supported:r.d()})}).call(this),this.fire("update",{changed:Object(n.f)({},this._state),current:this._state})}),t.target){var c=Object(n.i)(t.target);t.hydrate?this._fragment.l(c):this._fragment.c(),c.forEach(n.p),this._mount(t.target,t.anchor),Object(n.h)(this._oncreate)}}Object(n.e)(u.prototype,n.x),Object(n.e)(u.prototype,s),e.default=u}}]);